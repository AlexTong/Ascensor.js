/*
Ascensor.js 
version: 1.6.2 (2013-10-12)
description: Ascensor is a jquery plugin which aims to train and adapt content according to an elevator system
repository: https://github.com/kirkas/Ascensor.js
license: BSD
author: LÃ©o Galley <contact@kirkas.ch>
*/
(function(o,n,t){function i(n,t){this.element=n,this.options=o.extend({},s,t),this._defaults=s,this._name=e,this.init()}var e="ascensor",s={ascensorFloorName:null,childType:"div",windowsOn:0,direction:"y",loop:!0,ascensorMap:"",time:"1000",easing:"linear",keyNavigation:!0,touchSwipeIntegration:!1,queued:!1,queuedDirection:"x"};i.prototype.init=function(){function i(){f=k.width(),h=k.height(),y.width(f).height(h),w.width(f).height(h),"y"===g.options.direction&&w.stop().scrollTop(g.floorActive*h),"x"===g.options.direction&&(w.stop().scrollLeft(g.floorActive*f),y.each(function(n){o(this).css("left",n*f)})),"chocolate"===g.options.direction&&(y.each(function(n){o(this).css({left:g.options.ascensorMap[n][1]*f,top:g.options.ascensorMap[n][0]*h})}),w.stop().scrollLeft(g.options.ascensorMap[m][1]*f).scrollTop(g.options.ascensorMap[m][0]*h))}function e(o){if("y"==g.options.direction){if("left"==o)return;"down"==o?c():"up"==o&&s()}else if("y"==g.options.direction){if("up"==o)return;"left"==o?s():"right"==o&&c()}else"chocolate"==g.options.direction&&("down"==o?a(1,0):"up"==o?a(-1,0):"left"==o?a(0,-1):"right"==o&&a(0,1))}function s(){var o=m-1;0>o&&(o=g.options.loop?v:0),r(o,g.options.time)}function c(){var o=m+1;o>v&&(o=g.options.loop?0:v),r(o,g.options.time)}function a(n,t){var i=[g.options.ascensorMap[m][0]+n,g.options.ascensorMap[m][1]+t];o.each(g.options.ascensorMap,function(o){""+i==""+g.options.ascensorMap[o]&&r(o,g.options.time)})}function p(t){n.location.hash&&(d=n.location.hash.split("/").pop(),o(g.options.ascensorFloorName).each(function(n){d===g.options.ascensorFloorName[n]&&(m=n,o("."+g.options.ascensorName+"Link").removeClass(g.options.ascensorName+"LinkActive").eq(m).addClass(g.options.ascensorName+"LinkActive"),t||r(m,g.options.time,!0))}))}function r(o,t,i){var e={time:t,easing:g.options.easing,callback:function(){l()}};if("y"===g.options.direction)e.property={scrollTop:o*h};else if("x"===g.options.direction)e.property={scrollLeft:o*f};else if("chocolate"===g.options.direction&&(e.property={scrollLeft:g.options.ascensorMap[o][1]*f,scrollTop:g.options.ascensorMap[o][0]*h},g.options.queued)){var s=w.scrollLeft()===g.options.ascensorMap[o][1]*f,c=w.scrollTop()===g.options.ascensorMap[o][0]*h;"x"===g.options.queuedDirection?s?e.property={scrollTop:g.options.ascensorMap[o][0]*h}:(e.property={scrollLeft:g.options.ascensorMap[o][1]*f},e.callback=function(){w.stop().animate({scrollTop:g.options.ascensorMap[o][0]*h},t,g.options.easing,function(){l()})}):"y"===g.options.queuedDirection&&(c?e.property={scrollLeft:g.options.ascensorMap[o][1]*f}:(e.property={scrollTop:g.options.ascensorMap[o][0]*h},e.callback=function(){w.stop().animate({scrollLeft:g.options.ascensorMap[o][1]*f},t,g.options.easing,function(){l()})}))}w.stop().animate(e.property,t,g.options.easing,e.callback),i||null===g.options.ascensorFloorName||(n.location.hash="/"+g.options.ascensorFloorName[o]),m=o}function l(){w.trigger({type:"ascensorEnd",floor:m})}function u(n){if(!o("input, textarea, button").is(":focus"))switch(n.which){case 40:case 83:e("down");break;case 38:case 87:e("up");break;case 37:case 65:e("left");break;case 39:case 68:e("right")}}var f,h,d,g=this,w=o(this.element),y=w.children(g.options.childType),m=g.options.windowsOn,v=-1,M=(g.options.direction,o(t)),k=o(n);w.on("scrollToDirection",function(o,n){"next"==n?c():"prev"==n?s():e(n)}),w.on("scrollToStage",function(o,n){n>v||r(n)}),w.on("next",function(){c()}),w.on("prev",function(){s()}),w.on("update",function(){y=w.children(g.options.childType),i()}),w.css({position:"absolute",width:f,height:h}),y.width(f).height(h).each(function(){v+=1}),("x"===g.options.direction||"chocolate"===g.options.direction)&&y.css({position:"absolute",overflow:"auto"}),g.options.keyNavigation&&M.keydown(u),k.resize(function(){i()}).load(function(){i()}).resize(),n.DeviceOrientationEvent&&k.bind("orientationchange",function(){i()}),k.on("hashchange",function(){p()}),r(m,1,!0),p(!0),g.options.touchSwipeIntegration&&w.swipe({swipe:function(o,n){var t="";"up"==n?t="Down":"down"==n?t="Up":"left"==n?t="Right":"right"==n&&(t="Left"),w.trigger({type:"ascensor"+t,floor:m})},threshold:70})},o.fn[e]=function(n){return this.each(function(){o.data(this,"plugin_"+e)||o.data(this,"plugin_"+e,new i(this,n))})}})(jQuery,window,document);