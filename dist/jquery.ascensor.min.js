/*
Ascensor.js 
version: 1.6.5 (2013-10-13)
description: Ascensor is a jquery plugin which aims to train and adapt content according to an elevator system
repository: https://github.com/kirkas/Ascensor.js
license: BSD
author: LÃ©o Galley <contact@kirkas.ch>
*/
(function(o,n,t){function i(n,t){this.element=n,this.options=o.extend({},e,t),this._defaults=e,this._name=s,this.init()}var s="ascensor",e={ascensorFloorName:null,childType:"div",windowsOn:0,direction:"y",loop:!0,ascensorMap:"",time:"1000",easing:"linear",keyNavigation:!0,touchSwipeIntegration:!1,queued:!1,queuedDirection:"x"};i.prototype.init=function(){function i(){h=b.width(),d=b.height(),m.width(h).height(d),y.width(h).height(d),"y"===w.options.direction&&y.stop().scrollTop(v*d),"x"===w.options.direction&&(y.stop().scrollLeft(v*h),m.each(function(n){o(this).css("left",n*h)})),"chocolate"===w.options.direction&&(m.each(function(n){o(this).css({left:w.options.ascensorMap[n][1]*h,top:w.options.ascensorMap[n][0]*d})}),p(v,1),y.stop().scrollLeft(w.options.ascensorMap[v][1]*h).scrollTop(w.options.ascensorMap[v][0]*d))}function s(o){if("y"==w.options.direction){if("left"==o)return;"down"==o?c():"up"==o&&e()}else if("x"==w.options.direction){if("up"==o)return;"left"==o?e():"right"==o&&c()}else"chocolate"==w.options.direction&&("down"==o?r(1,0):"up"==o?r(-1,0):"left"==o?r(0,-1):"right"==o&&r(0,1))}function e(){var o=v-1;0>o&&(o=w.options.loop?M:0),p(o,w.options.time)}function c(){var o=v+1;o>M&&(o=w.options.loop?0:M),p(o,w.options.time)}function r(n,t){var i=[w.options.ascensorMap[v][0]+n,w.options.ascensorMap[v][1]+t];o.each(w.options.ascensorMap,function(o){""+i==""+w.options.ascensorMap[o]&&p(o,w.options.time)})}function a(){if(n.location.hash){g=n.location.hash.split("/").pop();var t=!1;return o(w.options.ascensorFloorName).each(function(o){g===w.options.ascensorFloorName[o]&&(t=o)}),t}}function p(o,t){l(v,o);var i={time:t,easing:w.options.easing,callback:function(){u(v,o)}};if("y"===w.options.direction)i.property={scrollTop:o*d};else if("x"===w.options.direction)i.property={scrollLeft:o*h};else if("chocolate"===w.options.direction&&(i.property={scrollLeft:w.options.ascensorMap[o][1]*h,scrollTop:w.options.ascensorMap[o][0]*d},w.options.queued)){var s=y.scrollLeft()===w.options.ascensorMap[o][1]*h,e=y.scrollTop()===w.options.ascensorMap[o][0]*d;"x"===w.options.queuedDirection?s?i.property={scrollTop:w.options.ascensorMap[o][0]*d}:(i.property={scrollLeft:w.options.ascensorMap[o][1]*h},i.callback=function(){y.stop().animate({scrollTop:w.options.ascensorMap[o][0]*d},t,w.options.easing,function(){u(v,o)})}):"y"===w.options.queuedDirection&&(e?i.property={scrollLeft:w.options.ascensorMap[o][1]*h}:(i.property={scrollTop:w.options.ascensorMap[o][0]*d},i.callback=function(){y.stop().animate({scrollLeft:w.options.ascensorMap[o][1]*h},t,w.options.easing,function(){u(v,o)})}))}y.stop().animate(i.property,t,w.options.easing,i.callback),w.options.ascensorFloorName&&(n.location.hash="/"+w.options.ascensorFloorName[o]),v=o}function l(o,n){var t={from:o,to:n};y.trigger("scrollStart",t)}function u(o,n){var t={from:o,to:n};y.trigger("scrollEnd",t)}function f(n){if(!o("input, textarea, button").is(":focus"))switch(n.which){case 40:case 83:s("down");break;case 38:case 87:s("up");break;case 37:case 65:s("left");break;case 39:case 68:s("right")}}var h,d,g,w=this,y=o(this.element),m=y.children(w.options.childType),v=w.options.windowsOn,M=-1,T=(w.options.direction,o(t)),b=o(n);if(y.on("scrollToDirection",function(o,n){"next"==n?c():"prev"==n?e():s(n)}),y.on("scrollToStage",function(o,n){n>M||p(n)}),y.on("next",function(){c()}),y.on("prev",function(){e()}),y.on("update",function(){m=y.children(w.options.childType),i()}),y.css({position:"absolute",width:h,height:d}),m.width(h).height(d).each(function(){M+=1}),("x"===w.options.direction||"chocolate"===w.options.direction)&&m.css({position:"absolute",overflow:"auto"}),w.options.keyNavigation&&T.keydown(f),w.options.ascensorFloorName&&n.location.hash){var k=a();k&&(v=k)}p(v,1,!0),w.options.touchSwipeIntegration&&y.swipe({swipe:function(o,n){var t="";"up"==n?t="Down":"down"==n?t="Up":"left"==n?t="Right":"right"==n&&(t="Left"),y.trigger({type:"ascensor"+t,floor:v})},threshold:70}),b.resize(function(){i()}).resize(),n.DeviceOrientationEvent&&b.bind("orientationchange",function(){i()})},o.fn[s]=function(n){return this.each(function(){o.data(this,"plugin_"+s)||o.data(this,"plugin_"+s,new i(this,n))})}})(jQuery,window,document);